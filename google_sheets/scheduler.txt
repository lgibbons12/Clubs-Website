
from apscheduler.schedulers.background import BackgroundScheduler
from django_apscheduler.jobstores import DjangoJobStore, register_events, register_job

from .sheets import fetch_and_save_data # import your function

scheduler = BackgroundScheduler()
scheduler.add_jobstore(DjangoJobStore(), "default")

# run this job every Monday at 10am
@register_job(scheduler, "cron", day_of_week='mon', hour='10', id="fetch_and_save_data_job")
def fetch_and_save_data_job():
    fetch_and_save_data() # call your function

register_events(scheduler)

scheduler.start()
print("Scheduler started!")

#https://medium.com/@kevin.michael.horan/scheduling-tasks-in-django-with-the-advanced-python-scheduler-663f17e868e6