{% load static %}
<html>
    <head>
        <title>Approval - Cannon Clubs</title>
    <link rel="stylesheet" type="text/css" href="{% static 'blog/full.css' %}">
    <link rel="icon" href="{% static 'display/cannonclubs.png' %}"><link>
    </head>

    <body>
        <header id="navbar">
            <button id="menu-button">&#9776; Menu</button>
            <h1>Cannon Clubs!</h1>
            
            <nav class="navbar-container">
                <ul class="nav-list">
                    <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="/blog" class="nav-link">Blog</a></li>
                    <li class="nav-item"><a href="/blog/form" class="nav-link">Create Blog</a></li>
                    <li class="nav-item"><a href="/blog/approval" class="nav-link">Approval !!Only for Dev!!</a></li>
                </ul>
            </nav>
        </header>
        
        <script>
            
            // This function runs when the DOM has fully loaded
            var navList = document.querySelector('.nav-list');
            
    
            // Add event listener for the menu button
            document.getElementById('menu-button').addEventListener('click', function() {
                
                if (navList.style.display === 'none' || navList.style.display === "") {
                    navList.style.display = "flex";
                }
                else {
                    navList.style.display = "none";
                }
                //navList.classList.toggle('show');
                });
           
            
        </script>
           
        
<div class="container">
    <h1>Approval Page</h1>
    <h2>Currently {{ posts_to_approve }} <strong>posts</strong> that need approval</h2>
    <h2>Currently {{ clubs_to_approve }} <strong>clubs</strong> that need approval</h2>

    {% if mtm.posts.all|length > 0 %}
    <button id="approval_button" data-url="{% url 'blog:approval_post_detail' mtm.posts.all.0.id %}">Start Approving Blogs</button>
{% elif mtm.clubs.all|length > 0 %}
    <button id="approval_button" data-url="{% url 'blog:approval_club_detail' mtm.clubs.all.0.id %}">Start Approving Clubs</button>
{% else %}
    <p>Nothing to approve</p>
{% endif %}

<script>
    document.getElementById('approval_button').addEventListener('click', function() {
        // Get the URL from the data-url attribute
        var url = this.getAttribute('data-url');

        // Log a message to the console
        console.log("Button clicked. Redirecting to:", url);

        // Redirect to the URL
        if (url) {
            window.location.href = url;
        }
    });
</script>
<!--
    {% if mtm.posts.all|length > 0 %}
    <button id="approval_button" href="{% url 'blog:approval_post_detail' mtm.posts.all.0.id %}">Start Approving Blogs</button>
    <script>
        document.getElementById('approval_button').addEventListener('click', function() {
            // Get the URL from the data-url attribute
            var url = this.getAttribute('data-url');
    
            // Log a message to the console
            console.log("Button clicked. Redirecting to:", url);
    
            // Redirect to the URL
            if (url) {
                window.location.href = url;
            }
        });
    </script>
{% elif mtm.clubs.all|length > 0 %}
    <button id="approval_button" href="{% url 'blog:approval_club_detail' mtm.clubs.all.0.id %}">Start Approving Clubs</button>
{% else %}
    <p>Nothing to approve</p>
{% endif %}
-->
</div>

</body>

</html>