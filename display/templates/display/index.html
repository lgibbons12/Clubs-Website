{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Home - Cannon Clubs</title>
    <link rel="stylesheet" type="text/css" href="{% static 'display/style.css' %}">
    <link rel="icon" href="{% static 'display/cannonclubs.png' %}"><link>
    
</head>
<body>
    
    <header id="navbar">
        <button id="menu-button">&#9776; Menu</button>
        <h1>Cannon Clubs!</h1>
        
        <nav class="navbar-container">
            <ul class="nav-list">
                <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="/blog" class="nav-link">Blog</a></li>
                <li class="nav-item"><a href="/blog/form" class="nav-link">Create Blog</a></li>
            </ul>
        </nav>
    </header>
    
    <script>
        
        // This function runs when the DOM has fully loaded
        var navList = document.querySelector('.nav-list');
        

        // Add event listener for the menu button
        document.getElementById('menu-button').addEventListener('click', function() {
            
            if (navList.style.display === 'none' || navList.style.display === "") {
                navList.style.display = "flex";
            }
            else {
                navList.style.display = "none";
            }
            //navList.classList.toggle('show');
            });
       
        
    </script>
        
        <form method="get" action="{% url 'display:index' %}">
            {{ search_form.as_p }}
            <button type="submit">Search</button>
        </form>
    
    <div class="main" id="projects">
        <div class="grid">
            <div class="item" id="pinkish">
                <img src="{%static 'display/new_club.png' %}" class="small">
                <h3><a class="projectlink" href="{% url 'display:form' %}">Create New Club</a></h3>
            </div>
        {% if club_list %}
            
                {% for club in club_list %}
                
                <div class="item" id="pinkish">
                    <img src="{% static 'display/cannonclubs.png' %}" class="small">
                    <h3 class="texty"><a class="projectlink" href="#" data-club-id="{{ club.id }}">{{ club.name }}</a></h3>
                </div>
                
                    {% endfor %}
            
        {% else %}
            <p>No clubs are available.</p>
        {% endif %}
    </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
$(document).ready(function() {
    $(".projectlink").click(function(e) {
        e.preventDefault();

        var clubId = $(this).data('club-id');
        console.log(clubId);
        $.ajax({
            type: 'GET',
            url: '{% url "display:club_details" %}',
            data: {'club_id': clubId},
            success: function(response) {
                console.log(response)
                $(".new-div").html(response);
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
});
</script>
<div class="new-div">
    
</div>

    
    <footer>
        &copy; 2023 Cannon Clubs
    </footer>
</body>
</html>
